(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c41751e"],{"0dba":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(e){return e.preventDefault(),t.goPage(t.pagination.current_page-1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.pagination.total_pages,(function(e){return a("li",{key:e,staticClass:"page-item",class:{active:t.pagination.current_page===e}},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.goPage(e)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[a("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(e){return t.goPage(t.pagination.current_page+1)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])},r=[],i={props:["pagination"],methods:{goPage:function(t){this.$emit("gopage",t)}}},o=i,n=a("2877"),d=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=d.exports},5682:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("table",{staticClass:"table mt-3"},[t._m(0),a("tbody",t._l(t.orders,(function(e){return a("tr",{key:e.id},[a("td",[e.is_paid?a("div",{staticClass:"text-success text-center"},[t._v("已付款")]):t._e(),e.is_paid?t._e():a("div",{staticClass:"text-danger text-center"},[t._v("未付款")])]),a("td",[t._v(t._s(e.id))]),a("td",[t._v(t._s(t._f("format-time")(e.create_at)))]),a("td",[t._v(t._s(e.message))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.total)))]),a("td",[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.openModal(e)}}},[t._v("編輯")])])])})),0)]),a("pagination",{attrs:{pagination:t.pagination},on:{gopage:t.getOrdersData}}),a("div",{staticClass:"modal fade",attrs:{id:"OrderModal",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-3"},[a("div",{},[t._v("下單日期："+t._s(t._f("format-time")(t.tempOrder.create_at)))])]),a("div",{staticClass:"col-md-5"},[a("div",{},[t._v("訂單編號："+t._s(t.tempOrder.id))])]),a("div",{staticClass:"col-md-4"},[a("label",{attrs:{for:"payment_methods"}},[t._v("付款方式：")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.payment_method,expression:"tempOrder.user.payment_method"}],attrs:{name:"payment_methods",id:"payment_methods"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.tempOrder.user,"payment_method",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"credit_card"}},[t._v("信用卡")]),a("option",{attrs:{value:"CVS_COD"}},[t._v("超商取貨付款")])])]),a("div",{staticClass:"col-md-3"},[a("div",{},[t._v("\n                  付款狀態：\n                  "),t.tempOrder.is_paid?a("span",{staticClass:"text-success text-center"},[t._v("已付款")]):t._e(),t.tempOrder.is_paid?t._e():a("span",{staticClass:"text-danger text-center"},[t._v("未付款")])])]),a("div",{staticClass:"col-md-5"},[a("div",{},[t._v("\n                  付款日期：\n                  "),t.tempOrder.is_paid?a("span",[t._v(t._s(t._f("format-time")(t.tempOrder.paid_date)))]):t._e()])]),a("div",{staticClass:"col-md-4"},[a("div",{},[t._v("訂單總額："+t._s(t.tempOrder.total)+" 元")])]),a("form",{staticClass:"col-12 mt-md-2 border-top border-bottom"},[a("div",{staticClass:"form-row mb-3"},[a("div",{staticClass:"col-12 h6 my-2"},[t._v("收件人資料")]),a("div",{staticClass:"col-md-6"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.name,expression:"tempOrder.user.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.tempOrder.user.name},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"name",e.target.value)}}})]),a("div",{staticClass:"col-md-6"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.tel,expression:"tempOrder.user.tel"}],staticClass:"form-control form-control-sm",attrs:{type:"tel",id:"usertel",name:"tel",placeholder:"請輸入電話"},domProps:{value:t.tempOrder.user.tel},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"tel",e.target.value)}}})])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.email,expression:"tempOrder.user.email"}],staticClass:"form-control form-control-sm",attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.tempOrder.user.email},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.user.address,expression:"tempOrder.user.address"}],staticClass:"form-control form-control-sm",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.tempOrder.user.address},on:{input:function(e){e.target.composing||t.$set(t.tempOrder.user,"address",e.target.value)}}})]),a("div",{staticClass:"form-group"},[t._m(2),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempOrder.message,expression:"tempOrder.message"}],staticClass:"form-control form-control-sm",attrs:{name:"",id:"comment",cols:"30",rows:"4"},domProps:{value:t.tempOrder.message},on:{input:function(e){e.target.composing||t.$set(t.tempOrder,"message",e.target.value)}}})])]),a("table",{staticClass:"table"},[t._m(3),a("tbody",t._l(t.tempOrder.products,(function(e){return a("tr",{key:e.id},[a("td",[a("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.product.imageUrl,alt:""}})]),a("td",[t._v(t._s(e.product.title))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.product.price)))]),a("td",[t._v(t._s(e.qty)+"/"+t._s(e.product.unit))])])})),0)])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateOrder}},[t.isLoading?a("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            儲存變更\n          ")])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",{attrs:{scope:"col",width:"80"}},[t._v("是否付款")]),a("th",{attrs:{scope:"col",width:"200"}},[t._v("訂單編號")]),a("th",{attrs:{scope:"col",width:"110"}},[t._v("下單日期")]),a("th",{attrs:{scope:"col"}},[t._v("訂單留言")]),a("th",{attrs:{scope:"col",width:"100"}},[t._v("訂單金額")]),a("th",{attrs:{scope:"col",width:"80"}},[t._v("編輯")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"OrderModalLabel"}},[t._v("編輯訂單")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{attrs:{for:"comment"}},[t._v("\n                    客戶留言\n                    "),a("small",{staticClass:"text-muted"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{width:"30"}}),a("th",[t._v("產品名稱")]),a("th",{attrs:{width:"80"}},[t._v("售價")]),a("th",{attrs:{width:"70"}},[t._v("數量")])])])}],i=a("0dba"),o=a("1157"),n=a.n(o),d={data:function(){return{orders:[],tempOrder:{create_at:"",id:"",is_paid:"",message:"",paid_date:"",payment_method:"",products:{},total:"",user:{address:"",email:"",name:"",tel:""},num:""},pagination:{}}},components:{Pagination:i["a"]},methods:{del:function(t){delete this.test[t],console.log(this.test)},getOrdersData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.$store.dispatch("updateLoading",!0);var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/admin/orders?page=").concat(t);e.$http.get(a).then((function(t){console.log("後台取得訂單資料：",t),e.orders=t.data.orders,e.pagination=t.data.pagination,e.$store.dispatch("updateLoading",!1)}))},updateOrder:function(){var t=this;t.$store.dispatch("updateLoading",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/admin/order/").concat(t.tempOrder.id);t.$http.put(e,{data:t.tempOrder}).then((function(e){console.log("更新訂單資料：",e),t.getOrdersData(),n()("#OrderModal").modal("hide")}))},openModal:function(t){this.tempOrder=Object.assign({},t),n()("#OrderModal").modal("show")}},computed:{isLoading:function(){return this.$store.state.isLoading}},created:function(){this.getOrdersData()}},l=d,c=a("2877"),m=Object(c["a"])(l,s,r,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2c41751e.af11b084.js.map