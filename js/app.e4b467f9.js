(function(t){function e(e){for(var a,c,u=e[0],i=e[1],s=e[2],d=0,h=[];d<u.length;d++)c=u[d],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&h.push(o[c][0]),o[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);p&&p(e);while(h.length)h.shift()();return r.push.apply(r,s||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,c=1;c<n.length;c++){var u=n[c];0!==o[u]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},c={app:0},o={app:0},r=[];function u(t){return i.p+"js/"+({}[t]||t)+"."+{"chunk-017f6bc4":"753bfa17","chunk-0915c89e":"ddbe5fe2","chunk-2c41751e":"af11b084","chunk-2d0b37be":"c44bffac","chunk-2d20778a":"0e6d6cae","chunk-2d2102cc":"95569246","chunk-2d23012c":"2058fb9b","chunk-350c2788":"2cc09017","chunk-39086968":"08b262e4","chunk-3a29f784":"bb2a16c4","chunk-42cdd455":"2c7d234c","chunk-4a3a446e":"aebb6fea","chunk-600f25ee":"d8538a23","chunk-7e83b537":"4307ac7c","chunk-940c67ac":"d561b25d","chunk-cfcdda80":"d53c5124"}[t]+".js"}function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(t){var e=[],n={"chunk-0915c89e":1,"chunk-350c2788":1,"chunk-39086968":1,"chunk-3a29f784":1,"chunk-42cdd455":1,"chunk-4a3a446e":1,"chunk-600f25ee":1,"chunk-940c67ac":1};c[t]?e.push(c[t]):0!==c[t]&&n[t]&&e.push(c[t]=new Promise((function(e,n){for(var a="css/"+({}[t]||t)+"."+{"chunk-017f6bc4":"31d6cfe0","chunk-0915c89e":"a7ad054e","chunk-2c41751e":"31d6cfe0","chunk-2d0b37be":"31d6cfe0","chunk-2d20778a":"31d6cfe0","chunk-2d2102cc":"31d6cfe0","chunk-2d23012c":"31d6cfe0","chunk-350c2788":"b1b24da2","chunk-39086968":"a7b440d4","chunk-3a29f784":"516e9fd9","chunk-42cdd455":"b1b24da2","chunk-4a3a446e":"27e27e84","chunk-600f25ee":"a7ad054e","chunk-7e83b537":"31d6cfe0","chunk-940c67ac":"b1b24da2","chunk-cfcdda80":"31d6cfe0"}[t]+".css",o=i.p+a,r=document.getElementsByTagName("link"),u=0;u<r.length;u++){var s=r[u],d=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(d===a||d===o))return e()}var h=document.getElementsByTagName("style");for(u=0;u<h.length;u++){s=h[u],d=s.getAttribute("data-href");if(d===a||d===o)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var a=e&&e.target&&e.target.src||o,r=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=a,delete c[t],p.parentNode.removeChild(p),n(r)},p.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){c[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=r);var s,d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=u(t);var h=new Error;s=function(e){d.onerror=d.onload=null,clearTimeout(p);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+a+": "+c+")",h.name="ChunkLoadError",h.type=a,h.request=c,n[1](h)}o[t]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:d})}),12e4);d.onerror=d.onload=s,document.head.appendChild(d)}return Promise.all(e)},i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/FurnitureShopCLI3Vuex/",i.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],r={name:"App"},u=r,i=(n("5c0b"),n("2877")),s=Object(i["a"])(u,c,o,!1,null,null,null),d=s.exports,h=n("8c4f");a["a"].use(h["a"]);var p=new h["a"]({routes:[{path:"*",redirect:"/home"},{path:"/",redirect:"/home",name:"index",component:function(){return n.e("chunk-0915c89e").then(n.bind(null,"d504"))},children:[{path:"home",name:"Home",component:function(){return n.e("chunk-3a29f784").then(n.bind(null,"bb51"))}},{path:"products",name:"Products",component:function(){return n.e("chunk-940c67ac").then(n.bind(null,"e6dc"))}},{path:"products/:category/:series",name:"FilterProducts",component:function(){return n.e("chunk-940c67ac").then(n.bind(null,"e6dc"))}},{path:"cart",name:"Cart",component:function(){return n.e("chunk-2d2102cc").then(n.bind(null,"b789"))}},{path:"customerorder",name:"CustomerOrder",component:function(){return n.e("chunk-2d23012c").then(n.bind(null,"eb70"))}},{path:"customercheckout/:id",name:"CustomerCheckout",component:function(){return n.e("chunk-2d20778a").then(n.bind(null,"a159"))}},{path:"login",name:"Login",component:function(){return n.e("chunk-39086968").then(n.bind(null,"a55b"))}},{path:"product/:id",name:"Product",component:function(){return n.e("chunk-2d0b37be").then(n.bind(null,"2923"))}},{path:"promotion",name:"Promotion",component:function(){return n.e("chunk-cfcdda80").then(n.bind(null,"bc7c"))}},{path:"career",name:"Career",component:function(){return n.e("chunk-4a3a446e").then(n.bind(null,"6990"))}},{path:"customerservice",name:"CustomerService",component:function(){return n.e("chunk-42cdd455").then(n.bind(null,"5e08"))}},{path:"contact",name:"Contact",component:function(){return n.e("chunk-350c2788").then(n.bind(null,"b8fa"))}}]},{name:"管理頁面",path:"/admin",component:function(){return n.e("chunk-600f25ee").then(n.bind(null,"7277"))},children:[{name:"產品頁面",path:"products",component:function(){return n.e("chunk-017f6bc4").then(n.bind(null,"5aeb"))},meta:{requiresAuth:!0}},{name:"優惠券頁面",path:"coupons",component:function(){return n.e("chunk-7e83b537").then(n.bind(null,"f329"))},meta:{requiresAuth:!0}},{name:"訂單頁面",path:"dashboardorders",component:function(){return n.e("chunk-2c41751e").then(n.bind(null,"5682"))},meta:{requiresAuth:!0}}]}]}),m=(n("a481"),n("c5f6"),function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,n){var a=e&&"."!==t&&(n.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return a})))}),l=function(t){return"$ ".concat(t)},f=function(t){var e=new Date(1e3*t),n=e.getFullYear(),a=e.getMonth()+1<10?"0".concat(e.getMonth()+1):e.getMonth()+1,c=e.getDate()<10?"0".concat(e.getDate()):e.getDate();return"".concat(n,"-").concat(a,"-").concat(c)},g=(n("ac6a"),n("2f62")),v=n("bc3a"),b=n.n(v),k=n("1157"),D=n.n(k);a["a"].use(g["a"]);var A=new g["a"].Store({strict:!0,state:{isLoading:!1,uploadCart:!1,product_id:"",isSignedIn:!1,isPaid:!1,isNew:!1,productsData:[],productData:{imageUrl:""},pageProducts:[],pagination:{},seriesList:[],messages:[],cartData:{carts:{0:{product:{imageUrl:""}}}},orderData:{user:{email:""}}},actions:{updateLoading:function(t,e){t.commit("LOADING",e)},uploadCart:function(t,e){t.commit("UPLOADCART",e)},updateSignIn:function(t,e){t.commit("SIGNIN",e)},getProductsData:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/products/all");t.commit("LOADING",!0),b.a.get(e).then((function(e){console.log("產品頁面取得資料：",e),t.commit("PRODUCTS",e.data.products);var n=e.data.products.map((function(t){return t.category_series})).filter((function(t,e,n){return n.indexOf(t)===e}));n.unshift("所有"),t.commit("SERIESLIST",n),t.commit("LOADING",!1)}))},getProductData:function(t,e){t.commit("INITPRODUCT"),console.log(e),t.commit("LOADING",!0);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/product/").concat(e);b.a.get(n).then((function(e){console.log("取得單筆產品資料：",e),t.commit("PRODUCT",e.data.product),t.commit("LOADING",!1)}))},getCartData:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/cart");b.a.get(e).then((function(e){t.commit("CARTDATA",e.data.data)}))},addCart:function(t,e){var n=e.id,a=e.qty,c=void 0===a?1:a,o=event.target;D()(o).attr("disabled",!0),t.commit("PRODUCT_ID",n);var r="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/cart"),u={product_id:n,qty:c};b.a.post(r,{data:u}).then((function(e){console.log("加到購物車內：",e);var n=e.data.message;e.data.success?(t.commit("PRODUCT_ID",null),D()(o).removeAttr("disabled"),t.dispatch("updateMessage",{message:n}),t.dispatch("getCartData")):(t.commit("PRODUCT_ID",null),D()(o).removeAttr("disabled"),t.dispatch("updateMessage",{message:n,status:"danger"}))}))},removeCartItem:function(t,e){"I"===event.target.nodeName?D()(event.target.parentElement).attr("disabled",!0):D()(event.target).attr("disabled",!0),t.commit("PRODUCT_ID",e);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/cart/").concat(e);b.a.delete(n).then((function(e){t.dispatch("getCartData")}))},getPagination:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.commit("LOADING",!0);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/products?page=").concat(e);b.a.get(n).then((function(e){t.commit("PAGEPRODUCTS",e.data.products),t.commit("PAGINATION",e.data.pagination),t.commit("LOADING",!1)}))},updateMessage:function(t,e){var n=e.message,a=e.status,c=void 0===a?"success":a,o=Math.floor(new Date/1e3);console.log("Alert:",n,c),t.commit("MESSAGES",{message:n,status:c,timestamp:o}),t.dispatch("removeMessageWithTiming",o)},removeMessage:function(t,e){t.commit("REMOVEMESSAGE",e)},removeMessageWithTiming:function(t,e){setTimeout((function(){t.commit("REMOVEMESSAGEWITHTIMING",e)}),5e3)},useCoupon:function(t,e){t.commit("LOADING",!0);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/coupon"),a={code:e};b.a.post(n,{data:a}).then((function(e){var n=e.data.message;e.data.success?(t.commit("FINALTOTAL",e.data.data.final_total),t.dispatch("updateMessage",{message:n}),t.commit("LOADING",!1)):(t.dispatch("updateMessage",{message:n,status:"danger"}),t.commit("LOADING",!1))}))},createOrder:function(t,e){D()(event.target).attr("disabled",!0),t.commit("UPLOADCART",!0);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/order"),a=e;b.a.post(n,{data:a}).then((function(e){e.data.success?(t.dispatch("getCartData"),p.push("/customercheckout/".concat(e.data.orderId)),t.commit("UPLOADCART",!1),D()(event.target).removeAttr("disabled")):(t.commit("UPLOADCART",!1),t.dispatch("updateMessage",{message:"訂單建立失敗，請洽客服人員",status:"danger"}),D()(event.target).removeAttr("disabled"))}))},getOrderData:function(t,e){t.dispatch("updateLoading",!0);var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/order/").concat(e);b.a.get(n).then((function(e){null==e.data.order?(t.dispatch("updateMessage",{message:"查無此訂單",status:"warning"}),p.push("/home")):(t.commit("ORDERDATA",e.data.order),t.commit("ISPAID",e.data.order.is_paid),t.dispatch("updateLoading",!1))}))},checkout:function(t,e){t.dispatch("updateLoading",!0),D()(event.target).addClass("disabled");var n="".concat("https://vue-course-api.hexschool.io","/api/").concat("komu","/pay/").concat(e);b.a.post(n).then((function(e){e.data.success?(t.commit("ISPAID",!0),t.commit("LOADING",!1)):(t.dispatch("updateMessage",{message:"付款失敗",status:"danger"}),t.commit("LOADING",!1))}))},signout:function(t){var e="".concat("https://vue-course-api.hexschool.io","/logout");b.a.post(e).then((function(e){if(e.data.success)p.push("/home");else{console.log("登出訊息:",e.data);var n=e.data.message;t.dispatch("updateMessage",{message:n,status:"danger"})}}))},login:function(t,e){var n="".concat("https://vue-course-api.hexschool.io","/admin/signin");b.a.post(n,e).then((function(e){if(e.data.success)t.commit("SIGNIN",!0),p.push("/admin");else{var n=e.data.message;t.dispatch("updateMessage",{message:n,status:"danger"})}}))},updateisNew:function(t,e){t.commit("ISNEW",e)}},mutations:{LOADING:function(t,e){t.isLoading=e},UPLOADCART:function(t,e){t.uploadCart=e},PRODUCT_ID:function(t,e){t.product_id=e},SIGNIN:function(t,e){t.isSignedIn=e},ISPAID:function(t,e){t.isPaid=e},ISNEW:function(t,e){t.isNew=e},PRODUCTS:function(t,e){t.productsData=e},PRODUCT:function(t,e){t.productData=e},PAGEPRODUCTS:function(t,e){t.pageProducts=e},PAGINATION:function(t,e){t.pagination=e},INITPRODUCT:function(t){t.productData={imageUrl:""}},SERIESLIST:function(t,e){t.seriesList=e},MESSAGES:function(t,e){t.messages.push(e)},REMOVEMESSAGEWITHTIMING:function(t,e){t.messages.forEach((function(n,a){n.timestamp===e&&t.messages.splice(a,1)}))},REMOVEMESSAGE:function(t,e){t.messages.splice(e,1)},CARTDATA:function(t,e){t.cartData=e},FINALTOTAL:function(t,e){t.cartData.final_total=e},ORDERDATA:function(t,e){t.orderData=e}}}),I=n("a7fe"),O=n.n(I),T=n("7bb1"),C=n("a925"),S=n("9062"),P=n.n(S),E=(n("e40d"),n("4989"),n("427f")),N=n.n(E);a["a"].config.productionTip=!1,b.a.defaults.withCredentials=!0,a["a"].use(C["a"]),a["a"].use(O.a,b.a),a["a"].component("loading",P.a),a["a"].filter("currency",m),a["a"].filter("cash-sign",l),a["a"].filter("format-time",f);var L=new C["a"]({locale:"zhTW"});a["a"].use(T["a"],{i18n:L,dictionary:{zhTW:N.a}}),p.beforeEach((function(t,e,n){if(t.meta.requiresAuth){var a="".concat("https://vue-course-api.hexschool.io","/api/user/check");b.a.post(a).then((function(t){console.log("檢查用戶是否仍持續登入：",t),t.data.success?n():(alert("請重新登入"),n({path:"/login"}))}))}else n()})),p.afterEach((function(t,e,n){window.scrollTo(0,0)})),new a["a"]({router:p,store:A,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("5e27"),c=n.n(a);c.a},"5e27":function(t,e,n){}});
//# sourceMappingURL=app.e4b467f9.js.map